<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>PROJETO BLIBLIOTECA EMG</title>
    <script src="https://code.jquery.com/jquery-3.4.0.min.js" integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg=" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style type="text/css">
        .main{
            background-image: url(../static/img/livros.jpg)

        }
        .table{
            background: #fff;
            box-shadow: 0 4px 8px;
        }

    </style>
</head>
<body>
    <div class="col-8 m-auto pt-2 pb-2 text-center">
        <h1>BIBLIOTECA</h1>
    </div>
    <div class="col-2 m-auto mb-4 pt-2 pb-2 text-center">
      <select name="filter_livro" id="etiqueta" class="form-control">
        <option value="">Escolha uma opção:</option>
        <option value="normal">PDF Normal</option>
        <option value="etiqueta">PDF para Etiqueta</option>
    </select>
    </div>
{% if db %}
   <div class="main">
    <div class="col-8 m-auto pt-2 pb-2 text-center" id="dados">
        <table class="table table-bordered">
            <thead class="table-dark">
              <tr>
                <th scope="col">#</th>
                <th scope="col">Nome</th>
                <th scope="col">Autor</th>
                <th scope="col">Data</th>
                <th scope="col">Quantidade</th>
                <th scope="col">Editora</th>
                <th scope="col">Tipo</th>
              </tr>
            </thead>

           <tbody>
            {% for dbs in db %}
              <tr>
                <th>{{dbs.id}}</th>
                <td>{{dbs.nome}}</td>
                <td>{{dbs.autor}}</td>
                <td>{{dbs.data}}</td>
                <td>{{dbs.quantidade}}</td>
                <td>{{dbs.editora}}</td>
                <td>{{dbs.tipo}}</td>
              </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    </div>
{% elif table %}
    <div class="main">
        <div   id="dados">
        {% for dbs in table %}
          <div style="width: 100px; height: auto; border: 1px solid black; margin: 4px; text-align: center; font-size: 30px; float: left;" id="items"><!--  tirar float left depois -->
            {% if dbs.tipo == 'Infantil' %}
                  I<br>
            {% elif dbs.tipo == 'Infanto-juvenil' %}
                  IJ<br>
            {% else %}
              {{dbs.tipo|slice:":3"| upper}}<br>
            {% endif %}
            {{dbs.nome| cut:" "| slice:":3"| upper}} <br>
            {{dbs.autor|slice:":3"| upper}}
          </div>
        {% endfor %}
        </div>
    </div>
{% endif %}
    <div class="col-8 m-auto pt-2 pb-2 text-center">
        <p>
            {% if db %}
                <input type="button" value="BAIXAR" class="btn btn-danger" onclick="funcao_pdf()">
            {% elif table %}
                <input type="button" value="BAIXAR" class="btn btn-danger" onclick="funcao_etiqueta()">
            {% endif %}
            <a href="/" class="btn btn-info">VOLTAR</a>
        </p>
    </div>  
    {% load static %}
    <script src="{% static 'javascript.js' %}"></script>
</body>
<script language="JavaScript" type="text/javascript">
        function funcao_etiqueta() {
            var pegar_dados=document.getElementById('dados').innerHTML;
            var janela = window.open( '  ' ,  '  ' ,'width=800,heigth=600');
            janela.document.write('<html><head>');
            janela.document.write('<title>PDF</title><style>div{float: left;} div #items{margin-top: 2px;}</style>');
            janela.document.write('<body>');
            janela.document.write(pegar_dados);
            janela.document.write('</body></html>');
            janela.document.close();
            janela.print();
        }
        function funcao_pdf() {
            var pegar_dados=document.getElementById('dados').innerHTML;
            var janela = window.open( '  ' ,  '  ' ,'width=800,heigth=600');
            janela.document.write('<html><head>');
            janela.document.write('<title>PDF</title><style>table, th, td{border: 1px solid black; border-collapse: collapse;} table{margin: auto} td{height: 100px; width: 1000px; font-size: 25px; text-align: center;} th{width: 300px; font-size:25px; text-align: center;}</style></head>');
            janela.document.write('<body>');
            janela.document.write(pegar_dados);
            janela.document.write('</body></html>');
            janela.document.close();
            janela.print();
        }

</script>
</html>
